"use strict";!function(){var e={currency:{usd:["ETHUSD","LTCUSD","BTCUSD"],eur:["ETHEUR","LTCEUR","BTCEUR"],rub:["ETHRUB","LTCRUB","BTCRUB"],gbp:["ETHGBP","LTCGBP","BTCGBP"]},defaultCurrency:"usd",selectCurrency:null,unit:["percent","price"],symbol:{usd:"36",eur:"8364",rub:"8381",gbp:"163",percent:"37"},period:["hour","day","week","month"],api:"https://apiv2.bitcoinaverage.com/indices/global/ticker/"},t={selectDefault:document.querySelector(".currency-usd__label"),checked:"usd",lastClick:null},c=document.querySelector(".select__item"),n=document.querySelector(".block-coin"),r=Array.from(document.querySelectorAll(".switch input"));function u(e){l(e,e.defaultCurrency||e.selectCurrency)}function l(e,t){e.currency[t].map(function(c){fetch(e.api+c).then(function(e){if(e.ok)return e.json();throw new Error("Error fetching data")}).then(function(n){var r=c.toLowerCase().slice(0,3);document.querySelector("."+r+"-price__value").textContent=""+String.fromCharCode(e.symbol[t])+n.last.toFixed(2),document.querySelector('.switch input[value="'+r+'"]').checked?o(e,r,n,e.unit[1]):o(e,r,n,e.unit[0])}).catch(function(e){console.log("Error:"+e)})})}function o(e,t,c,n){var r=void 0;e.period.map(function(u){r=c.changes[n][u].toFixed(2),n===e.unit[0]?document.querySelector("."+t+"-"+u+"-change__value").textContent=""+(r+String.fromCharCode(e.symbol[n])):document.querySelector("."+t+"-"+u+"-change__value").textContent=""+(r+String.fromCharCode(e.symbol[e.selectCurrency||e.defaultCurrency])),+r>0?document.querySelector("."+t+"-"+u+"-change__value").classList.add("plus"):+r<0&&document.querySelector("."+t+"-"+u+"-change__value").classList.add("minus")})}t.selectDefault.addEventListener("click",function(){var e=document.querySelector(".select__item").style;"none"===e.display||""===e.display?e.display="flex":e.display="none"}),c.addEventListener("click",function(c){null===t.lastClick&&t.checked===c.target.value||(t.lastClick=c.target.value,document.querySelector(".currency-usd__label").textContent=c.target.value,document.querySelector(".select__item").style.display="none",e.selectCurrency=c.target.value,void 0!==c.target.value&&l(e,c.target.value))}),n.addEventListener("click",function(t){r.find(function(e){return e===t.target})&&u(e)}),u(e)}();